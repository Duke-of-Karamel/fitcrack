import{H as o}from"./hashTypeAutocomplete.7a13e3d9.js";import{n as h}from"./index.e8a7a5b9.js";import"./vendor.6aa46313.js";var d=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"cont"},[t("v-toolbar",{attrs:{flat:""}},[t("h2",[e._v("Hashlists")]),t("v-spacer"),t("v-btn",{attrs:{text:"",color:"primary",to:{name:"createHashlist"}}},[t("v-icon",{attrs:{left:""}},[e._v(" mdi-book-plus ")]),e._v(" Create new ")],1)],1),t("div",{staticClass:"d-flex mx-3"},[t("v-switch",{staticClass:"mx-2",attrs:{label:"Show discarded","prepend-icon":"mdi-delete-empty"},on:{change:e.loadHashes},model:{value:e.isTrash,callback:function(a){e.isTrash=a},expression:"isTrash"}}),t("v-text-field",{staticClass:"mx-2 search-field",attrs:{clearable:"","prepend-icon":"mdi-table-search",label:"Search","single-line":""},on:{input:e.loadHashes},model:{value:e.search,callback:function(a){e.search=a},expression:"search"}}),t("HashTypeAutocomplete",{staticClass:"mx-2",attrs:{label:"Filter by hash type","single-line":"","prepend-icon":"mdi-lock",clearable:""},on:{input:e.loadHashes},model:{value:e.hash_type,callback:function(a){e.hash_type=a},expression:"hash_type"}})],1),t("v-divider"),t("v-data-table",{ref:"table",attrs:{headers:e.headers,items:e.hashlists,search:e.search,options:e.dataTableOptions,"server-items-length":e.totalItems,loading:e.loading,"footer-props":{itemsPerPageOptions:[25,50,100],itemsPerPageText:"Hashlists per page"}},on:{"update:options":function(a){e.dataTableOptions=a}},scopedSlots:e._u([{key:"item.name",fn:function(a){var s=a.item;return[t("router-link",{attrs:{to:{name:"hashlistDetail",params:{id:s.id}}}},[e._v(" "+e._s(s.name)+" ")])]}},{key:"item.progress",fn:function(a){var s=a.item;return[t("div",{staticClass:"d-inline-flex align-center"},[t("span",{staticClass:"mr-1"},[e._v(e._s(s.cracked_hash_count)+" / "+e._s(s.hash_count))]),t("v-progress-circular",{attrs:{value:s.cracked_hash_count/s.hash_count*100,max:100,color:"success",size:"18",rotate:"270"}})],1)]}},{key:"item.added",fn:function(a){var s=a.item;return[e._v(" "+e._s(new Date(s.added).toLocaleString())+" ")]}},{key:"item.actions",fn:function(a){var s=a.item;return[t("v-tooltip",{attrs:{left:""},scopedSlots:e._u([{key:"activator",fn:function(n){var r=n.on;return[t("v-btn",e._g({staticClass:"mx-0",attrs:{icon:"",href:e.$serverAddr+"/hashlist/"+s.id+"/download"}},r),[t("v-icon",[e._v(" mdi-download ")])],1)]}}],null,!0)},[t("span",[e._v("Download")])]),t("v-tooltip",{attrs:{left:""},scopedSlots:e._u([{key:"activator",fn:function(n){var r=n.on;return[t("v-btn",e._g({staticClass:"mx-0",attrs:{icon:""},on:{click:function(v){return e.deleteOrRestore(s.id)}}},r),[t("v-icon",[e._v(" "+e._s(e.isTrash?"mdi-delete-restore":"mdi-delete")+" ")])],1)]}}],null,!0)},[t("span",[e._v(e._s(e.isTrash?"Restore":"Discard"))])])]}}])})],1)},c=[];const u={name:"HashListLister",data:function(){return{interval:null,status:"active",totalItems:0,dataTableOptions:{sortBy:["added"],sortDesc:[!0]},loading:!0,headers:[{text:"Name",value:"name",align:"start",sortable:!0},{text:"Hash type",value:"hash_type_name",align:"end",sortable:!0},{text:"Progress",value:"progress",align:"end",sortable:!1},{text:"Created",value:"added",align:"end",sortable:!0},{text:"Jobs",value:"job_count",align:"end",sortable:!1},{text:"Actions",value:"actions",align:"end",sortable:!1}],hashlists:[],search:"",hash_type:null,isTrash:!1}},watch:{dataTableOptions:{handler:function(e){this.loadHashes()},deep:!0}},mounted(){this.loadHashes(),this.interval=setInterval(function(){this.loadHashes(!0)}.bind(this),5e3)},beforeDestroy:function(){clearInterval(this.interval)},computed:{orderBy(){const e=this.dataTableOptions.sortBy;if(e.length>0)switch(e[0]){case"name":return"name";case"hash_type_name":return"hash_type";default:return null}else return null}},methods:{loadHashes(e=!1){e||(this.loading=!0),this.axios.get(this.$serverAddr+"/hashlist",{params:{page:this.dataTableOptions.page,per_page:this.dataTableOptions.itemsPerPage,order_by:this.orderBy,descending:this.dataTableOptions.sortDesc?this.dataTableOptions.sortDesc[0]:!1,name:this.search,hash_type:this.hash_type!=null?this.hash_type.code:null,showDeleted:this.isTrash}}).then(i=>{this.hashlists=i.data.items,this.totalItems=i.data.total,this.loading=!1})},updateStatus:function(e){this.status=e,this.$refs.table.updatePagination({page:1,totalItems:this.totalItems})},deleteOrRestore(e){this.axios.delete(`${this.$serverAddr}/hashlist/${e}`).then(this.loadHashes)}},components:{HashTypeAutocomplete:o}},l={};var p=h(u,d,c,!1,m,"5fec0d08",null,null);function m(e){for(let i in l)this[i]=l[i]}var g=function(){return p.exports}();export{g as default};
