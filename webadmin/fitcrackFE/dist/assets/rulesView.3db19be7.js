import{f as s}from"./numberFormat.773889d3.js";import{t as u}from"./fc_tile.117cbeb1.js";import{F as d}from"./fileUploader.8a700325.js";import{n as c}from"./index.e8a7a5b9.js";import"./vendor.6aa46313.js";var v=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("v-container",{staticClass:"max700"},[t("fc-tile",{staticClass:"ma-2",attrs:{title:"Rules",icon:e.$route.meta.icon}},[t("v-alert",{staticClass:"mb-0",attrs:{tile:"",text:"",type:"warning"}},[e._v(" Rule files must have a .txt or .rule extension. ")]),t("v-data-table",{attrs:{headers:e.headers,items:e.rules.items,loading:e.loading,"footer-props":{itemsPerPageOptions:[10,25,50],itemsPerPageText:"Rules per page"}},scopedSlots:e._u([{key:"item.name",fn:function(n){var r=n.item;return[t("router-link",{attrs:{to:"rules/"+r.id}},[e._v(" "+e._s(r.name)+" ")])]}},{key:"item.count",fn:function(n){var r=n.item;return[e._v(" "+e._s(e.fmt(r.count))+" ")]}},{key:"item.time",fn:function(n){var r=n.item;return[e._v(" "+e._s(e.$moment.utc(r.time).local().format("DD.MM.YYYY HH:mm"))+" ")]}},{key:"item.actions",fn:function(n){var r=n.item;return[t("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(o){var a=o.on;return[t("router-link",{attrs:{to:"/rules/edit/"+r.id}},[t("v-btn",e._g({attrs:{icon:""}},a),[t("v-icon",{attrs:{color:"primary"}},[e._v("mdi-file-edit-outline")])],1)],1)]}}],null,!0)},[t("span",[e._v("Edit file")])]),t("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(o){var a=o.on;return[t("a",e._g({attrs:{href:e.$serverAddr+"/rule/"+r.id+"/download",target:"_blank",download:""}},a),[t("v-btn",{attrs:{icon:""}},[t("v-icon",[e._v("mdi-file-download-outline")])],1)],1)]}}],null,!0)},[t("span",[e._v("Download")])]),t("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(o){var a=o.on;return[t("v-btn",e._g({attrs:{icon:""},on:{click:function(h){return e.deleteRule(r)}}},a),[t("v-icon",{attrs:{color:"error"}},[e._v(" mdi-delete-outline ")])],1)]}}],null,!0)},[t("span",[e._v("Delete")])])]}}])}),t("v-divider"),t("v-row",{staticClass:"mt-0"},[t("v-col",{staticClass:"d-flex align-center justify-center"},[t("router-link",{attrs:{to:"/rules/edit/new"}},[t("v-btn",{attrs:{large:"",color:"primary"}},[t("v-icon",{attrs:{left:""}},[e._v(" mdi-file-plus ")]),e._v(" Create new rule file ")],1)],1)],1),t("v-col",[t("v-card",[t("v-card-title",{staticClass:"primary"},[e._v(" Upload existing rule file ")]),t("v-divider"),t("file-uploader",{attrs:{url:this.$serverAddr+"/rule"},on:{uploadComplete:e.loadRules}})],1)],1)],1)],1)],1)},m=[];const _={name:"RulesView",components:{FileUploader:d,"fc-tile":u},data:function(){return{loading:!1,rules:[],headers:[{text:"Name",align:"start",value:"name"},{text:"Count",value:"count",align:"end"},{text:"Added",value:"time",align:"end"},{text:"Actions",value:"actions",align:"end",sortable:!1}]}},mounted:function(){this.loadRules()},methods:{fmt:s,loadRules:function(){this.loading=!0,this.axios.get(this.$serverAddr+"/rule",{}).then(e=>{this.rules=e.data,this.loading=!1})},deleteRule:function(e){this.$root.$confirm("Delete",`This will remove ${e.name} from your rules. Are you sure?`).then(i=>{this.loading=!0,this.axios.delete(this.$serverAddr+"/rule/"+e.id).then(t=>{this.loadRules()})})}}},l={};var f=c(_,v,m,!1,p,"99caa6c8",null,null);function p(e){for(let i in l)this[i]=l[i]}var k=function(){return f.exports}();export{k as default};
